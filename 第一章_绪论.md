## 1.数据库系统概述

### 1.1 基本概念（数据，数据库，数据库管理系统，数据库系统）

#### 1.1.1 数据（数据库存储的基本对象）DATA

* 定义：描述事物的符号记录
* 数据的含义称为数据的语义，数据与其语义是不可分的
* 数据的表现形式：
  * **可用多种不同的数据形式表示同一信息，而信息不随数据形式的不同而改变**
  * 表现形式不仅包括数字和文字，还包括图形、图象、声音等

#### 1.1.2 数据库 DB

* 数据库是长期存储在计算机内**有组织的大量可共享的**数据集合
* 数据按一定的数据模型（一般是关系模型），**组织**、**描述**、和**存储**，具有**较小的冗余度**、**较高的数据独立性**和**易扩展性**
* 基本特点：
  * 永久存储
  * 有组织
  * 可共享

#### 1.1.3 数据库管理系统（科学的组织和存储数据、高效的获取和维护数据）DBMS

* 定义：位于用户与操作系统之间的一层数据管理软件
* 数据库管理系统和操作系统一样是计算机的**基础软件**
* 主要功能：
  * **数据定义功能**
    * DDL：数据定义语言
    * 数据对象的组成与结构进行定义
  * **数据组织、存储和管理**
    * 组织和存储的基本目标：提高存储空间利用率和方便存取
    * 提供多种存取方法（索引查找、hash查找、顺序查找等）提高存取效率
  * **数据操纵功能**
    * DML：数据操纵语言，实现对数据库的基本操作
  * **数据库的事务管理和运行管理**
  * **数据库的建立和维护功能**

#### 1.1.4 数据库系统 DBS

* 一般由**数据库**、**数据库管理系统（及其开发工具）**、**应用系统**、**数据库管理员（DBA）**和**用户**构成的**存储**、**管理**、**处理**和**维护数据**的系统

  | 名字           | 功能                         |
  | -------------- | ---------------------------- |
  | 数据库         | 提供数据的存储               |
  | 数据库管理系统 | 数据的组织、存取、管理和维护 |
  | 数据库应用系统 | 根据应用需求使用数据库       |
  | 数据库管理员   | 全面管理数据库系统           |

  <img src="imgs/数据库系统.png" alt="数据库系统" style="zoom:50%;" />

* DBMS在操作系统（OS）的支持下工作
* 应用程序在DBMS支持下才能使用数据库

***



### 1.2 数据管理技术的发展

#### 1.2.1 人工管理阶段

* 没有操作系统，没有管理数据的软件。只有汇编语言
* 只有纸带、磁带等，没有硬盘等直接存取的存储设备
* 特点：
  1. **数据不保存**
  2. **系统没有专用的软件对数据进行管理**
     * 每个应用程序都要包括数据的存储结构、存取方法、输入方式等
  3. **数据不共享**（一组数据只能对应一个程序，产生大量冗余数据）
  4. **数据不具有独立性**
     * 数据的逻辑结构或物理结构发生变化时，必须对应用程序做修改，数据完全依赖于应用程序

#### 1.2.2 文件系统阶段

* 操作系统中已经有了专门的管理数据的软件(即文件系统)
* 有了磁盘等直接存取的存储设备

***

**特点：**

* 系统提供一定的数据管理功能
  * 存取方法（索引文件、链接文件、直接存取文件、倒排文件等）
  * 支持对文件的基本操作（增、删、改、查 等），用户程序不必考虑物理细节

* 数据与程序有了一定的独立性
  * 程序和数据之间由文件系统提供存取方法进行转换

***

**缺点：**

* 数据共享性差，冗余度大
* 数据独立性低
* 数据一致性差

#### 1.2.3 数据库系统阶段

* 从文件系统到数据库系统标志着数据管理技术的飞跃

特点：

* 数据结构化
  * 数据库系统实现整体数据的结构化，这是数据库的主要特征之一，也是数据库系统与文件系统的本质区别
  * “整体”结构化：指数据库中的数据不在仅仅针对一个应用，而是面向整个组织和企业；不仅数据内部是结构化的，整体也是结构化的
* 数据共享性高、冗余少，易扩充
  * 数据共享可以大大减少数据冗余，节约存储空间
  * 数据共享还能避免数据之间的不相容性和不一致性
* 数据的独立性高：
  * 逻辑独立性和物理独立性
  * 逻辑独立性：用户的应用程序与数据库的逻辑结构是相互独立的
  * 物理独立性：用户的应用程序与数据库中数据的物理存储是相互独立的
* 有统一的数据控制功能
  * 数据的安全性（security）控制：防止不合法使用数据造成数据的泄露和破坏
  * 数据的完整性(integrity)控制: 系统通过设置一些完整性规则以确保数据的正确性、有效性和相容性
    * 完整性：数据的正确性、有效性、相容性
    * 正确性：数据的合法性，例如年龄只能包含数字
    * 有效性：数据在其定义的有效范围
    * 相容性：表示同一事实的两个数据应相同
  * 并发（concurrency）控制：多用户同时存取或修改数据库时，防止相互干扰而提供给用户不正确的数据，并使数据库受到破坏
  * 数据恢复：**当数据库被破坏或数据不可靠时，系统有能力将数据库从错误状态恢复到最近某一时刻的正确状态。**

#### 综合：

​	**数据库是长期存储在计算机内有组织、大量、共享的数据集合。它可供各种用户共享，具有最小冗余度和较高的数据独立性。数据库管理系统在数据库建立、运用和维护时对数据库进行统一控制，以保证数据的完整性和安全性，并在多用户同时使用数据库时进行并发控制，在发生故障时对数据库进行恢复。**

* 数据库管理系统的出现使信息系统**从以加工数据的程序为中心转向围绕共享的数据库为中心的新阶段。**

***

### 1.2 数据模型

#### 1.2.1 两类数据模型

**三个世界：**

* 现实世界：客观世界

* 信息世界：现实世界在人脑中的反映，用文字和符号记载下来

* 机器世界：**信 息 世 界 的 信 息 在 机 器 世 界 以 数 据形式存储**

  <img src="imgs/三个世界.png" alt="三个世界" style="zoom:50%;" />

* 先将现实世界的事物及联系抽象成信息世界的信息模型（也称为概念模型）

* **然后再抽象成计算机世界的数据模型**

  <img src="imgs/三个世界1.png" alt="三个世界" style="zoom:50%;" />

  ***

  

#### 1.2.2 数据模型（对现实世界数据特征的抽象）（网状、层次、关系）（主要用于数据库管理系统的实现）

* 就是用来描述数据，组织数据和对数据进行操作的

* **是数据库系统的核心与基础**
* 数据模型应满足三方面的条件：
  1. 比较真实地模拟现实世界
  2. 容易被人理解
  3. 便于在计算机上实现
* 由**数据结构**、**数据操作**和**数据的完整性约束条件**三个要素组成

1. 数据结构（最重要）

   * 描述数据库的组成对象以及对象之间的联系

     * A.与数据类型、内容、性质有关的对象

       B.与数据之间联系有关的对象

   * 层次模型（树）、网状模型（有向图）、关系模型（二维表）

   * 研究对象类型的集合

2. 数据操作
   * 指对数据库中各种对象的实例允许执行的操作的集合，包括操作和相关的操作规则
   * 操作分为两大类：**检索**和**更新**(删除、插入、更改)
3. 数据的完整性约束条件
   * 是一组完整性规则的集合，用来保证数据的正确、有效、相容

**常用的数据模型：**

* 层次模型
* 网状模型
* 关系模型（最主要采用，最重要的数据模型）
* 面向对象模型
* 对象关系模型

****

#### 1.2.3 概念模型（主要用于数据库设计）

**实体：**

* 客观存在并且可以相互区别的事物称为实体
* 实体可以是可触及的对象，如一个学生，一本书，一辆汽车；也可以是抽象的概念，如一次选课，一次比赛等

**属性：**

* **实体的某一特性称为属性**

**实体型：**（抽象的集合）

* **具有相同属性的实体必然具有共同的特征和性质**
* **用实体名及其属性名集合来抽象和刻画同类实体，称为实体型**

**实体集：**

* **同型实体的集合称为实体集**

<img src="imgs/实体.png" alt="三个世界" style="zoom:60%;" />

**码：** 能**唯一标识一个实体**的**属性**或**属性集**称为实体的码

**域：** **属性值的取值范围称为该属性的域**

**联系：事物的内部以及事物之间是有联系的，实体之间的联系通常是指不同实体集之间的联系**

* 一对一、一对多、多对多

***

**概念模型的一种表示方法：实体-联系方法（E-R模型）**

* 用**E-R图**来描述现实世界的概念模型
* **E-R方法**也称为**E-R模型**

### E-R 图的表示

**实体型：用一个矩形表示，矩形框内写明实体名**

**属性：用椭圆表示，椭圆内写明属性名，并用无向边将属性和相应的实体联系起来**

**联系本身：用菱形表示，菱形框内写明联系名**

**多个实体型间的1:n 联系（不能缺少任何一个实体型）**

<img src="imgs/多实体联系.png" alt="三个世界" style="zoom:60%;" />

### 1.3 关系模型

#### 1.3.1基本概念：

* **关系**：**对应通常所说的一张表**

* **元组：表中的某一行**

* **属性：表中的一列即为一个属性，给每一个属性起一个名称即属性名**

* **主码（Key）：表中的某个属性组，它可以唯一确定一个元组**

* **域（Domain）：属性的取值范围**

* **分量：元组中的一个属性值**

* **关系模式：**对关系的描述，一般表示为：

  ​	关系名（属性1，属性2，...，属性n）

#### 1.3.2 其他

* **关系模型要求必须是规范化的，满足一定的规范条件**
  * **关系中的每一个分量必须是一个不可分的数据项（最基本的一条）**
  * **不允许表中还有表**

<img src="imgs/关系模型相关术语.png" alt="三个世界" style="zoom:60%;" />

#### 1.3.3 关系模型基本操作

* 查询
* 插入
* 删除
* 更新数据

***

1. 关系数据模型的数据操作是**集合操作**

2. 操作对象和操作结果都是关系，即若干元组的集合
3. **存取路径对用户隐蔽，用户只要指出“干什么”，不必详细说明“怎么干“**

#### 1.3.4 完整性约束条件：

* 实体完整性
* 参照完整性
* 用户定义的完整性

#### 1.3.5 关系模型的优缺点：

**优点：**

*  **建立在严格的数学概念的基础上**

* **概念单一**
  * **实体和各类联系都用关系来表示**
  
  * **对数据的查询结果也是关系**
  
*  **关系模型的存取路径对用户透明**
* **具有更高的数据独立性，更好的安全保密性**
  
* **简化了程序员的工作和数据库开发建立的工作**

***

**缺点：**

* **存取路径对用户透明导致查询效率往往不如非关系数据模型**

* **为提高性能，必须对用户的查询请求进行优化，增加了开发DBMS的难度**

***



# 2 数据库系统结构



## 2.1数据库系统模式的概念

* 数据模型有 ” 型 “ 和 ”值“的概念
  * 型：对某一类数据的结构和属性的描述
  * 值：型的一个具体赋值
* 模式：数据库中全体数据的逻辑结构和特征的描述（反映数据的结构及其联系）
  * 模式的一个具体值称为实例
  * 模式是相对稳定的，实例是相对变化的 
  * 实例反映的是数据库某一时刻的状态



## 2.2 三级模式两级映像

### 2.2.1 模式

* *它不涉及数据的物理存储细节和硬件环境，也与具体的应用程序，与所使用的应用开发工具及高级程序设计语言无关*

* **一个数据库只有一个模式**
* **用模式描述语言（模式DDL）描述数据在逻辑上的视图**



### 2.2.2 外模式（子模式）

* 是数据库用户看到的数据视图
* 一个数据库可以有多个外模式
* 外模式通常是模式的子集，不同用户的外模式的描述可以不同
* 不同用户的外模式可以互相覆盖，同一外模式可以为某一用户的多个应用所启用，一个应用程序只能启用一个外模式
* 用外模式描述语言(外模式DDL)描述用户数据视图



### 2.2.3 内模式

* 一个数据库只有一个内模式
* 是对数据的 物 理 结 构 和 存 储 方 式 的 描 述
* 用内模式描述语言(内模式DDL)来描述和定义



### 2.2.4 两级映射

1. **外模式/模式映象**
   * **当模式改变时，修改外模式/模式映象，使外模式保持不变，从而应用程序可以保持不变，称为数据的逻辑立性**
2. **模式/内模式映象**
   * **定义数据全局逻辑结构与存储结构之间的对应关系**
   * **存储结构改变时，修改模式/内模式映象，使模式保持不变，从而应用程序可以保持不变，称为数据的物独立性**



### 2.2.5 三级模式的特点：

* 保证数据的独立性

* 简化了用户接口，方便了用户使用

*  有利于数据共享及数据安全保密

* 会给系统增加一些额外开销

<img src="imgs/三模式.png" alt="三个世界" style="zoom:50%;" />





***

题目：



